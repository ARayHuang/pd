@import '../color.styl'
@import '../height.styl'
@import '../badge.styl'

$order-list-bottom-bar-height = 48px
$order-lists-height = $order-list-processing-saving-height + $order-list-bottom-bar-height

$layout-background = $ivory-grey
$sidebar-background = $dark-grey
$sidebar-border-color = $ivory-grey

$padding-top = 17px
$padding-bottom = 17px
$avatar-height = 92px
$sidebar-saving-height = $padding-top + $padding-bottom
$channel-list-height = $sidebar-saving-height + $avatar-height
$consumer-sidebar-saving-height = 175px

pagination-setting()
	&__orders
		position: relative
		&::after
			content: ''
			display: block
			width: 100%
			background-color: $white
			position: absolute
			z-index: 2
			bottom: 0
			left: 0
			border-bottom-left-radius: 12px
			border-bottom-right-radius: 12px
			border-top: 1px solid $ivory-grey3
			box-shadow: -3px -1px 3px 0px alpha($black, 0.2)

#page-wrapper.container
	padding: 10px

.ant-layout
	height: $max-height
	min-height: $min-height
	max-height: $max-height

	&.provider
		.processing-orders
			border-bottom-left-radius: 12px
			border-bottom-right-radius: 12px
			pagination-setting()
			.filtered-orders
				.list-wrap
					.ant-spin-nested-loading
						max-height: "calc(%s - %s)" % ($order-list-total-height $order-lists-height)
						height: "calc(%s - %s)" % ($order-list-total-height $order-lists-height)
						min-height: $adjust-screen-min-height - $order-lists-height
						@media only screen and (min-height: $adjust-screen-max-height + 1px)
							max-height: $adjust-screen-max-height - $order-lists-height

	&.consumer
		.processing-orders
			border-bottom-left-radius: 12px
			border-bottom-right-radius: 12px
			pagination-setting()
		.sidebar-menu__order-list
			.ant-list-split
				height: 95%
				max-height: 95%
			.ant-spin-nested-loading
				height: "calc(%s - %s)" % ($max-height $consumer-sidebar-saving-height)
				max-height: "calc(%s - %s)" % ($max-height $consumer-sidebar-saving-height)
				min-height: $min-height - $consumer-sidebar-saving-height

.layout
	min-height: $max-height

	&__header
		height: 40px
		position: relative
		background: none
		box-shadow: none
		z-index: 5
		height: auto
		padding: 0

		&__title
			color: $black
			line-height: 1
			font-size: 24px
			font-weight: 500
			margin-bottom: 24px

			.ljit-icon
				margin-right: 12px

	&__content
		margin: 0px
		background: none

	&__left,
	&__right
		border: 0
		padding: 24px 12px
		background-color: $layout-background

	&__left
		width: 60%
		min-width: 708px
		padding-left: 24px

	&__right
		width: 40%
		min-width: 517px
		padding-right: 24px

.trigger
	font-size: 20px

.sidebar-menu
	padding: 17px 0px
	background-color: $sidebar-background

	.ant-layout-sider-children
		min-height: "calc(%s - %s)" % ($min-height $sidebar-saving-height)
		max-height: "calc(%s - %s)" % ($max-height $sidebar-saving-height)
		overflow-y: hidden
		overflow-x: hidden

		.ant-menu
			min-height: "calc(%s - %s)" % ($min-height $channel-list-height + 22px)
			max-height: "calc(%s - %s)" % ($max-height $channel-list-height + 22px)
			overflow-y: auto
			overflow-x: hidden

	.ljit-user-avatar
		padding-bottom: 5px

	.ant-avatar
		width: 40px
		height: 40px

	.ljit-menu--dark
		background: none

		.ant-menu-item.ljit-menu__item
			padding: 12px 0 12px 0
			padding-left: 34px !important
			font-size: 14px
			&.ant-menu-item-selected
				background: alpha($white, 0.41)
				color: $white

		> .ljit-menu__item
			height: auto
			line-height: 1
			margin: 1px auto 0
			font-size: 16px

			> div
				margin-left: -20px

	.ant-divider-horizontal
		background: $sidebar-border-color
		margin: 11px 0 16px 0

	&__header
		padding: 0 20px

	&__username
		color: $white
		cursor: pointer
		text-align: center
		margin-bottom: 15px
		display: flex

		> div
			overflow: hidden
			white-space: nowrap
			text-overflow: ellipsis
			max-width: 84px
			min-width: 84px

		> .ljit-icon
			line-height: 2.5

	&__dropdown
		width: 100px
		box-shadow: 0 2px 4px 0 alpha($black, 0.37)
		z-index: 1000

		&,
		.ljit-menu
			border-radius: 4px

		.ljit-menu__item
			padding: 8px !important
			line-height: 1
			height: auto
			color: $black
			a
				color: $black

			&:hover
				color: $white
				background-color: $blue
				a
					color: $white

	&__order-list
		border-top: 1px solid rgba($white, 0.05)

		.ant-list-header
			border-bottom: 0

		.ant-list-split .ant-list-item
			border-bottom: 0
			border-top: 1px solid rgba($white, 0.05)
			color: $text-light-grey2
			padding: 10px 14px 10px 12px
			height: 40px

			&:last-child
				border-bottom: 1px solid rgba($white, 0.05)

			&:hover
				background-color: rgba($white, 0.08)
				color: $white
				cursor: pointer
				position: relative

				&::after
					content: '点击两次接单'
					font-size: 10px
					position: absolute
					right: 2px
					top: 12px
					color: rgba($white, 0.5)
					transform: scale(0.85)

		.ant-spin-nested-loading
			overflow-y: auto

		.ant-spin-container
			height: 100vh

		.ant-list-empty-text
			color: rgba($white, 0.5)

	&__order-list-header
		color: $white
		display: flex
		justify-content: space-around
		align-items: center

		div > img
			cursor: pointer
